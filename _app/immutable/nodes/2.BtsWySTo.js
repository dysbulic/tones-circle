import{a as V,n as oe,c as he}from"../chunks/disclose-version.AHCLQcLA.js";import{W as ge,w as Ee,A as T,_ as $,$ as xe,i as ye,ac as ce,af as Ce,ag as U,a7 as j,C as B,ah as ue,x as ve,ai as me,aj as q,e as J,ak as Z,al as K,am as De,v as Te,s as ee,an as P,ao as Ge,ab as we,ap as Ne,z as Ie,X as be,a8 as ke,aq as _e,ar as Be,a5 as Fe,as as Oe,at as Le,u as Re,au as Se,h as ae,av as Me,D as He,aw as re,c as te,d as g,O as Y,G as Ve,Q as z,T as M,V as $e,F as je,r as W}from"../chunks/runtime.Cb-4ZYSk.js";import{a as qe}from"../chunks/store.keA6ZAmH.js";import{p as F,a as se}from"../chunks/props.C5_84C-d.js";let X=null;function ne(r,e){return e}function Ye(r,e,a,t){for(var i=[],o=e.length,l=0;l<o;l++)Ge(e[l].e,i,!0);var h=o>0&&i.length===0&&a!==null;if(h){var E=a.parentNode;we(E),E.append(a),t.clear(),b(r,e[0].prev,e[o-1].next)}Ne(i,()=>{for(var d=0;d<o;d++){var _=e[d];h||(t.delete(_.k),b(r,_.prev,_.next)),Ie(_.e,!h)}})}function ie(r,e,a,t,i,o=null){var l=r,h={flags:e,items:new Map,first:null},E=(e&_e)!==0;if(E){var d=r;l=T?$(be(d)):d.appendChild(ge())}T&&xe();var _=null,f=!1;Ee(()=>{var p=a(),u=ye(p)?p:p==null?[]:ce(p),v=u.length;if(f&&v===0)return;f=v===0;let A=!1;if(T){var x=l.data===Ce;x!==(v===0)&&(l=U(),$(l),j(!1),A=!0)}if(T){for(var m=null,c,s=0;s<v;s++){if(B.nodeType===8&&B.data===ke){l=B,A=!0,j(!1);break}var n=u[s],D=t(n,s);c=de(B,h,m,null,n,D,s,i,e),h.items.set(D,c),m=c}v>0&&$(U())}T||ze(u,h,l,i,e,t),o!==null&&(v===0?_?ue(_):_=ve(()=>o(l)):_!==null&&me(_,()=>{_=null})),A&&j(!0),a()}),T&&(l=B)}function ze(r,e,a,t,i,o){var k,R,w,S;var l=(i&Oe)!==0,h=(i&(K|P))!==0,E=r.length,d=e.items,_=e.first,f=_,p,u=null,v,A=[],x=[],m,c,s,n;if(l)for(n=0;n<E;n+=1)m=r[n],c=o(m,n),s=d.get(c),s!==void 0&&((k=s.a)==null||k.measure(),(v??(v=new Set)).add(s));for(n=0;n<E;n+=1){if(m=r[n],c=o(m,n),s=d.get(c),s===void 0){var D=f?f.e.nodes_start:a;u=de(D,e,u,u===null?e.first:u.next,m,c,n,t,i),d.set(c,u),A=[],x=[],f=u.next;continue}if(h&&We(s,m,n,i),s.e.f&q&&(ue(s.e),l&&((R=s.a)==null||R.unfix(),(v??(v=new Set)).delete(s))),s!==f){if(p!==void 0&&p.has(s)){if(A.length<x.length){var N=x[0],G;u=N.prev;var O=A[0],L=A[A.length-1];for(G=0;G<A.length;G+=1)fe(A[G],N,a);for(G=0;G<x.length;G+=1)p.delete(x[G]);b(e,O.prev,L.next),b(e,u,O),b(e,L,N),f=N,u=L,n-=1,A=[],x=[]}else p.delete(s),fe(s,f,a),b(e,s.prev,s.next),b(e,s,u===null?e.first:u.next),b(e,u,s),u=s;continue}for(A=[],x=[];f!==null&&f.k!==c;)f.e.f&q||(p??(p=new Set)).add(f),x.push(f),f=f.next;if(f===null)continue;s=f}A.push(s),u=s,f=s.next}if(f!==null||p!==void 0){for(var C=p===void 0?[]:ce(p);f!==null;)f.e.f&q||C.push(f),f=f.next;var y=C.length;if(y>0){var H=i&_e&&E===0?a:null;if(l){for(n=0;n<y;n+=1)(w=C[n].a)==null||w.measure();for(n=0;n<y;n+=1)(S=C[n].a)==null||S.fix()}Ye(e,C,H,d)}}l&&Be(()=>{var Q;if(v!==void 0)for(s of v)(Q=s.a)==null||Q.apply()}),J.first=e.first&&e.first.e,J.last=u&&u.e}function We(r,e,a,t){t&K&&Z(r.v,e),t&P?Z(r.i,a):r.i=a}function de(r,e,a,t,i,o,l,h,E){var d=X;try{var _=(E&K)!==0,f=(E&De)===0,p=_?f?Te(i):ee(i):i,u=E&P?ee(l):l,v={i:u,v:p,k:o,a:null,e:null,prev:a,next:t};return X=v,v.e=ve(()=>h(r,p,u),T),v.e.prev=a&&a.e,v.e.next=t&&t.e,a===null?e.first=v:(a.next=v,a.e.next=v.e),t!==null&&(t.prev=v,t.e.prev=v.e),v}finally{X=d}}function fe(r,e,a){for(var t=r.next?r.next.e.nodes_start:a,i=e?e.e.nodes_start:a,o=r.e.nodes_start;o!==t;){var l=Fe(o);i.before(o),o=l}}function b(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Xe(r,e,a){Le(()=>{var t=Re(()=>e(r,a==null?void 0:a())||{});if(t!=null&&t.destroy)return()=>t.destroy()})}function I(r,e,a,t){var i=r.__attributes??(r.__attributes={});T&&(i[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||i[e]!==(i[e]=a)&&(e==="style"&&"__styles"in r&&(r.__styles={}),e==="loading"&&(r[Se]=a),a==null?r.removeAttribute(e):typeof a!="string"&&Ke(r).includes(e)?r[e]=a:r.setAttribute(e,a))}var le=new Map;function Ke(r){var e=le.get(r.nodeName);if(e)return e;le.set(r.nodeName,e=[]);for(var a,t=ae(r),i=Element.prototype;i!==t;){a=Me(t);for(var o in a)a[o].set&&e.push(o);t=ae(t)}return e}function Pe(r,e){var a=r.__className,t=Qe(e);T&&r.getAttribute("class")===t?r.__className=t:(a!==t||T&&r.getAttribute("class")!==t)&&(t===""?r.removeAttribute("class"):r.setAttribute("class",t),r.__className=t)}function Qe(r){return r??""}function pe(r){var e,a,t="";if(typeof r=="string"||typeof r=="number")t+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(a=pe(r[e]))&&(t&&(t+=" "),t+=a)}else for(a in r)r[a]&&(t&&(t+=" "),t+=a);return t}function Ue(){for(var r,e,a=0,t="",i=arguments.length;a<i;a++)(r=arguments[a])&&(e=pe(r))&&(t&&(t+=" "),t+=e);return t}const Je=(r,{ramp:e=.01,dur:a=.1}={})=>{const t=new AudioContext,i=t.createOscillator(),o=t.createGain(),l=t.currentTime;i.frequency.value=r,i.connect(o),o.connect(t.destination),o.gain.setValueAtTime(0,l),o.gain.exponentialRampToValueAtTime(1,l+e),o.gain.setValueAtTime(1,l+a-e),o.gain.exponentialRampToValueAtTime(1e-4,l+a),i.start(l)},Ae=[{C:65.41,"C♯":69.3,"D♭":69.3,D:73.42,"D♯":77.78,"E♭":77.78,E:82.41,F:87.31,"F♯":92.5,"G♭":92.5,G:98,"G♯":103.83,"A♭":103.83,A:110,"A♯":116.54,"B♭":116.54,B:123.47},{C:130.81,"C♯":138.59,"D♭":138.59,D:146.83,"D♯":155.56,"E♭":155.56,E:164.81,F:174.61,"F♯":185,"G♭":185,G:196,"G♯":207.65,"A♭":207.65,A:220,"A♯":233.08,"B♭":233.08,B:246.94},{C:261.63,"C♯":277.18,"D♭":277.18,D:293.66,"D♯":311.13,"E♭":311.13,E:329.63,F:349.23,"F♯":369.99,"G♭":369.99,G:392,"G♯":415.3,"A♭":415.3,A:440,"A♯":466.16,"B♭":466.16,B:493.88},{C:523.25,"C♯":554.37,"D♭":554.37,D:587.33,"D♯":622.25,"E♭":622.25,E:659.26,F:698.46,"F♯":739.99,"G♭":739.99,G:783.99,"G♯":830.61,"A♭":830.61,A:880,"A♯":932.33,"B♭":932.33,B:987.77},{C:1046.5,"C♯":1108.73,"D♭":1108.73,D:1174.66,"D♯":1244.51,"E♭":1244.51,E:1318.51,F:1396.91,"F♯":1479.98,"G♭":1479.98,G:1567.98,"G♯":1661.22,"A♭":1661.22,A:1760,"A♯":1864.66,"B♭":1864.66,B:1975.53},{C:2093,"C♯":2217.46,"D♭":2217.46,D:2349.32,"D♯":2489.02,"E♭":2489.02,E:2637.02,F:2793.83,"F♯":2959.96,"G♭":2959.96,G:3135.96,"G♯":3322.44,"A♭":3322.44,A:3520,"A♯":3729.31,"B♭":3729.31,B:3951.07},{C:4186.01}],Ze=Ae.map(r=>Object.fromEntries(Object.entries(r).map(([e,a])=>[e,a*(432/440)]))),ea=Object.freeze(Object.defineProperty({__proto__:null,A432:Ze,A440:Ae},Symbol.toStringTag,{value:"Module"}));var aa=oe('<circle cx="50%" cy="50%"><title> </title></circle>'),ra=oe('<svg viewBox="0 0 500 500" class="svelte-1k7kxjw"><g></g><line x1="50%" y1="50%" x2="50%" y2="0" class="svelte-1k7kxjw"></line></svg>');function ta(r,e){He(e,!0);const a=F(e,"segCount",3,12),t=F(e,"space",3,1/5),i=F(e,"centerR",3,5),o=F(e,"delay",3,500),l=F(e,"noteSet",3,"A432");let h=W(()=>1/t()),E=W(()=>50-i()/2);const d=ea[l()].map(c=>Object.entries(c).map(([s,n])=>({note:s,freq:n}))).flat();let _=re(0),f=re(se([]));setInterval(()=>{te(_,(g(_)+1)%a()),g(f).filter(({j:s})=>s===g(_)).map(({i:s})=>s).forEach(s=>{Je(d[s].freq)})},o());const p=(c,s)=>c*a()+s,u=c=>{const s=({i:D,j:N})=>D===c.i&&N===c.j,n=!!g(f).find(s);return te(f,se(n?g(f).filter(D=>!s(D)):[...g(f),c])),!n},v=c=>{c.addEventListener("click",()=>{u({i:Number(c.dataset.i),j:Number(c.dataset.j)})?c.classList.add("selected"):c.classList.remove("selected")})};var A=ra(),x=z(A);ie(x,21,()=>Array.from({length:d.length}),ne,(c,s,n)=>{var D=he(),N=je(D);ie(N,17,()=>Array.from({length:a()}),ne,(O,L,C)=>{var y=aa();I(y,"data-i",n),I(y,"data-j",C);const H=W(()=>`${Ue(`arcs-${C}`,`arc-${p(n,C)}`,g(_)===C&&"active",!!g(f).find(({i:w,j:S})=>w===n&&S===C)&&"selected")??""} svelte-1k7kxjw`);var k=z(y),R=z(k);Y(()=>{var w;return qe(R,`${Math.floor(n/a())??""}:${((w=d[n%a()-1])==null?void 0:w.note)??""}`)}),M(k),M(y),Xe(y,w=>v(w)),Y(()=>{I(y,"r",`${g(E)*((n+1)/d.length)+g(E)*(i()/100)}%`),I(y,"stroke-dasharray",`${g(h)-1} ${a()*g(h)-(g(h)-1)}`),I(y,"stroke-dashoffset",(a()-C)*g(h)),I(y,"pathLength",a()*g(h)),Pe(y,g(H))}),V(O,y)}),V(c,D)}),M(x);var m=$e(x);M(A),Y(()=>{I(x,"transform",`rotate(
    ${360/a()/2+360/a()*t()/2-360/a()*(a()/3)}
    250
    250
  )`),I(m,"transform",`rotate(${360/a()*g(_)} 250 250)`)}),V(r,A),Ve()}function la(r){ta(r,{})}export{la as component};
